<!DOCTYPE html>
<html>
<head>
    <title>Check Local Storage</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        pre { background: #f0f0f0; padding: 10px; overflow: auto; }
        .key { color: blue; font-weight: bold; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Local Storage Data Check</h1>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        // Check all localStorage keys
        const keys = Object.keys(localStorage);
        results.innerHTML += `<h2>Total localStorage keys: ${keys.length}</h2>`;
        
        // Look for trip-related keys
        const tripKeys = keys.filter(key => 
            key.includes('trip') || 
            key.includes('Trip') || 
            key.includes('itinerary') ||
            key.includes('places') ||
            key.includes('supabase')
        );
        
        results.innerHTML += `<h2>Trip-related keys found: ${tripKeys.length}</h2>`;
        
        // Display each trip-related key and its value
        tripKeys.forEach(key => {
            try {
                const value = localStorage.getItem(key);
                const parsed = JSON.parse(value);
                results.innerHTML += `
                    <div>
                        <h3 class="key">${key}</h3>
                        <pre>${JSON.stringify(parsed, null, 2)}</pre>
                    </div>
                `;
            } catch (e) {
                const value = localStorage.getItem(key);
                results.innerHTML += `
                    <div>
                        <h3 class="key">${key}</h3>
                        <pre>${value}</pre>
                    </div>
                `;
            }
        });
        
        // Check sessionStorage too
        results.innerHTML += `<h2>SessionStorage Check</h2>`;
        const sessionKeys = Object.keys(sessionStorage);
        results.innerHTML += `<p>Total sessionStorage keys: ${sessionKeys.length}</p>`;
        
        const sessionTripKeys = sessionKeys.filter(key => 
            key.includes('trip') || 
            key.includes('Trip') || 
            key.includes('supabase')
        );
        
        sessionTripKeys.forEach(key => {
            try {
                const value = sessionStorage.getItem(key);
                const parsed = JSON.parse(value);
                results.innerHTML += `
                    <div>
                        <h3 class="key">${key} (session)</h3>
                        <pre>${JSON.stringify(parsed, null, 2)}</pre>
                    </div>
                `;
            } catch (e) {
                const value = sessionStorage.getItem(key);
                results.innerHTML += `
                    <div>
                        <h3 class="key">${key} (session)</h3>
                        <pre>${value}</pre>
                    </div>
                `;
            }
        });
        
        if (tripKeys.length === 0 && sessionTripKeys.length === 0) {
            results.innerHTML += '<p class="error">No trip data found in localStorage or sessionStorage!</p>';
        }
    </script>
</body>
</html>
