<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Auth Tokens</title>
</head>
<body style="padding: 20px; font-family: sans-serif;">
    <h1>Clear Authentication</h1>
    <p>This will clear all stored authentication tokens.</p>
    
    <button onclick="clearAuth()" style="padding: 10px 20px; font-size: 16px; background: #dc2626; color: white; border: none; border-radius: 4px;">
        Clear All Auth Tokens
    </button>
    
    <div id="result" style="margin-top: 20px; padding: 10px; background: #f5f5f5; border-radius: 4px;"></div>
    
    <script>
        function clearAuth() {
            const result = document.getElementById('result');
            let cleared = [];
            
            // Clear all possible auth keys
            const keysToRemove = [
                'wanderplan-auth',
                'sb-wanderplan-auth-token',
                'sb-zhusodnwzmbpvvkxjtvn-auth-token',
                'supabase.auth.token',
                'authToken',
                'wanderplan_user',
                'wanderplan_session',
                'wanderplan_session_expiry'
            ];
            
            // Also find any keys that start with 'sb-'
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && key.startsWith('sb-')) {
                    keysToRemove.push(key);
                }
            }
            
            keysToRemove.forEach(key => {
                if (localStorage.getItem(key)) {
                    localStorage.removeItem(key);
                    cleared.push(key);
                }
            });
            
            result.innerHTML = `
                <h3>Cleared ${cleared.length} items:</h3>
                <ul>${cleared.map(k => `<li>${k}</li>`).join('')}</ul>
                <p>Now try logging in again at <a href="/">main app</a></p>
            `;
        }
        
        // Show current auth state
        document.getElementById('result').innerHTML = `
            <h3>Current localStorage auth keys:</h3>
            <ul>
            ${Array.from({length: localStorage.length}, (_, i) => {
                const key = localStorage.key(i);
                if (key && (key.includes('auth') || key.includes('sb-') || key.includes('wanderplan'))) {
                    const value = localStorage.getItem(key);
                    return `<li><strong>${key}:</strong> ${value ? value.substring(0, 50) + '...' : 'empty'}</li>`;
                }
                return '';
            }).filter(Boolean).join('')}
            </ul>
        `;
    </script>
</body>
</html>